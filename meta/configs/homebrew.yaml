- defaults:
    link:
      create: true
      relink: true
      force: true
- link:
    ~/.Brewfile: Brewfile

- shell++:
  - description: Install Homebrew
    condition: '! hash brew 2>/dev/null'
  - stdout: true
    stderr: true
    command: |
      # Ask for the administrator password upfront
      sudo -v

      # Keep-alive: update existing `sudo` time stamp until `.macos` has finished
      while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

      /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"

- brewfile:
    file: Brewfile

- tap:
  - caskroom/versions
  - caskroom/cask
  # - pivotal/tap

- brew:
  - mas
  - git-extras
  - git-flow-avh
  - gitversion
  - exa
  # - fish
  - tmux
  - tmate
  # - curl --with-openssl
  - curl

- brew: [zsh, zsh-completions, zsh-syntax-highlighting]

- cask:
  - dotnet
  - gitkraken
  - iterm2
  - kdiff3
  - visual-studio
  - visual-studio-code

- shell++:
  - description: Install Apps
    condition: 'true'
  - stdout: true
    stderr: true
    command: |
      # Install XCode
      mas install 497799835

      # Install Slack
      mas install 803453959

      # Install OneDrive
      mas install 823766827

- shell++:
  - description: Run XCode First Lauch to accept license
    condition: '! xcodebuild -checkFirstLaunchStatus'
  - stdout: true
    stderr: true
    command: |
      # Ask for the administrator password upfront
      sudo -v

      # Keep-alive: update existing `sudo` time stamp until `.macos` has finished
      while true; do sudo -n true; sleep 60; kill -0 "$$" || exit; done 2>/dev/null &

      sudo xcodebuild -runFirstLaunch
      xcode-select --install
